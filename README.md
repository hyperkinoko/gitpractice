# Git & GitHub ハンズオン

## 概要

* 開催日
  * 2022/01/27 20:00-22:00
    * 参加者の皆さん，長時間お疲れさまでした！
* 参加者
  * みこさん
  * SHIGEさん
  * えいちゃん

## Gitとは？

gitは履歴を管理する仕組み

## 用語

### リモートリポジトリ

管理の仕組みも含めたプロジェクトの置き場所。ローカルリポジトリの親になる。

インターネットやイントラネット上に置かれてチームメンバーからアクセスできるようにするのが一般的。  
自分でgitリポジトリのサーバを立ててもいいけど，GitHub，gitlabなどのサービスを利用するのが一般的

### ローカルリポジトリ

リモートリポジトリの内容をまるっと自分のPC上に複製したもの。

ローカルリポジトリ <--pull--push--> リモートリポジトリを行うことで内容を取り込み合う。

### コンフリクト

marge元とmerge先で変更内容が衝突したときにおこる。解消法は，マーカーを見ながら手作業になることが多い

GUIで「resolve conflict」などのメニューがあるとうれしい（IntelliJ IDEAにはある。多分vsCodeにも）

### カレントブランチ

今いるブランチ。

```
git branch
```

で確認できる（*がついている）。

### merge

変更内容をくっつけること。だいたいのプルリクエスト（後述）はmainにmergeする。
別ブランチでの作業中に，mainブランチをmergeすることもよくある。（他の人が行ったバグ修正などを自分のブランチにも反映したいときなど）

## 主な操作

### add

gitに変更を登録すること（indexing）

部分的にaddするコマンド

```
git add -p
```

ファイルごとにaddするコマンド

```
git add ファイル名
```

あわせ技もできます

```
git add -p ファイル名
```

### commit

登録した変更をスタンプのように記録すること

```
git commit -m "コミットメッセージ"
```

コミットメッセージを書き間違えた場合は

```
git commit --amend
```

で修正可能（viが開きます）

### push


ローカルリポジトリの内容をリモートリポジトリへ送る（同じブランチ同士）

よく失敗する。先にpullしないといけなかったり。
エラーメッセージをよく見ればヒントが書いてあるし，だいたいそのとおりにするとうまくいく。

まだリモートリポジトリに存在しないブランチを`push`するときは

```
git push -u origin ブランチ名
```

すでにあれば

```
git push
```
だけでOK

### pull

リモートリポジトリの内容をローカルリポジトリへ取り込む（同じブランチ同士）。

これもよく失敗する。コンフリクトしたり，先に`commit`しないといけなかったり。
エラーメッセージをよく見ればヒントが書いてあるし，だいたいそのとおりにするとうまくいく。

### checkout

ブランチを切り替える。

```
git checkout ブランチ名
```

新しいブランチを（カレントブランチの最新commit状態から）作成し，さらにそのブランチに移動するには

```
git checkout -b 新しいブランチ名
```

このとき，カレントブランチで`add`や`commit`していない変更内容は，新しいブランチの方に持ち越されるが，もちろん`add`も`commit`もされていない（ので，ちゃんと`add`や`commitをしないといけない）

チーム開発では，概ねmainブランチの最新から新しいブランチを作るので，mainに移動して`pull`してからブランチを作成する。

## GitHub上での作業

新しいブランチを`push`すると，PR（プルリクエスト / プルリク:pull request）が作成できる。
merge先はmainブランチであることがほとんど。

1. PRが作られる
1. レビュワーがreviewする
2. 修正依頼をする
   a. suggestを出す場合
   b. たんなる修正依頼を出す場合
3. 開発者（PRを出した人）が修正する
   a. commit suggest
   b. 手元で修正してadd -> commit -> push
4. レビュワーがもう一度修正を確認して，OKならapprove -> merge する
